#!/usr/bin/env bash
set -e

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
COMMAND="${1:-}"
BASE_DIR="$ROOT/tools"
source "$BASE_DIR/colors.sh"

case "$COMMAND" in
    create|-c|-C)
        shift
        exec "$ROOT/tools/termux-build-create.sh" "$@"
        ;;

    lint|-l|-L)
        shift
        exec "$BASE_DIR/termux-build-lint.sh" "$@"
        ;;

    check-pr|-cpr|-pr)
        exec "$BASE_DIR/termux-build-check-pr.sh" "$@"
        ;;

    doctor|-d|-D)
        exec "$BASE_DIR/termux-build-doctor.sh"
        ;;

    suggest|-s|-S)
        shift
        exec "$BASE_DIR/termux-build-suggest.sh" "$@"
        ;;

    explain|-e|-E|-ex)
        shift
        exec "$BASE_DIR/termux-build-explain.sh" "$@"
        ;;

    template|-t|-T)
        exec "$BASE_DIR/termux-build-template.sh"
        ;;

    guide|-g|-G)
        exec "$BASE_DIR/termux-build-guide.sh"
        ;;

    *)
        echo -e "${RED}Usage:${RESET}"
        echo -e "  ${GREEN}./termux-build create <package>${RESET}"
        echo -e "  ${GREEN}./termux-build lint <path | package-name>${RESET}"
        echo -e "  ${GREEN}./termux-build check-pr <package>${RESET}"
        echo -e "  ${GREEN}./termux-build doctor${RESET}"
        echo -e "  ${GREEN}./termux-build suggest <package>${RESET}"
        echo -e "  ${GREEN}./termux-build explain <package>${RESET}"
        echo -e "  ${GREEN}./termux-build template${RESET}"
        echo -e "  ${GREEN}./termux-build guide${RESET}"
        exit 1
        ;;
esac
